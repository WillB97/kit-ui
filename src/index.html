<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="theme-color" content="#3270ed" />
    <title>Robot</title>
    <link
      rel="stylesheet"
      href="../node_modules/@mdi/font/css/materialdesignicons.min.css"
    />
    <link rel="stylesheet" href="style.scss" />
    <link rel="shortcut icon" href="favicon.svg" type="image/svg+xml"/>
    <script lang="javascript">
      MQTT_SERVER = `ws://${location.hostname}:9001`;
      MQTT_TOPIC = "team0/#";
    </script>
  </head>

  <body>
    <div class="controls" id="controls">
      <div class="field has-addons control-buttons">
        <p class="control">
          <button class="button" data-action="clearLog" title="Clear log">
            <span class="icon has-text-link">
              <span class="mdi mdi-24px mdi-delete-sweep"></span>
            </span>
          </button>
        </p>
      </div>
      <p id="status"></p>
      <div class="field is-grouped metadata-selectors">
        <div class="control">
          <span
            id="theme-toggle"
            tabindex="0"
            class="button"
            style="display: none"
          >
            <span class="icon has-text-link">
              <span id="toggle-theme-icon" class="mdi mdi-24px"></span>
            </span>
          </span>
        </div>
        <div class="control">
          <span
            tabindex="0"
            class="button modal-trigger"
            data-target="modal-camera"
          >
            <span class="icon has-text-link">
              <span class="mdi mdi-24px mdi-camera" />
            </span>
          </span>
        </div>
      </div>
      <div class="mobile-metadata-toggle">
        <div class="control">
          <span
            tabindex="0"
            class="button modal-trigger"
            data-target="modal-info"
          >
            <span class="icon has-text-link">
              <span class="mdi mdi-24px mdi-information" />
            </span>
          </span>
        </div>
        <div class="control">
          <span
            tabindex="0"
            class="button modal-trigger"
            data-target="modal-camera"
          >
            <span class="icon has-text-link">
              <span class="mdi mdi-24px mdi-camera" />
            </span>
          </span>
        </div>
        <div class="control">
          <span
            id="mobile-theme-toggle"
            tabindex="0"
            class="button"
            style="display: none"
          >
            <span class="icon has-text-link">
              <span id="mobile-toggle-theme-icon" class="mdi mdi-24px"></span>
            </span>
          </span>
        </div>
      </div>
    </div>
    <div class="log-list" id="log"></div>

    <div class="modal is-active" id="modal-disconnected">
      <div class="modal-background"></div>
      <div class="modal-card">
        <section class="modal-card-body">
          <h1 class="title">Connecting to robot&hellip;</h1>
          <p>
            If you find this is taking longer than a minute to connect, try
            refreshing the page or power cycling your robot. If issues persist,
            send us a message in the support forum in Discord under the Kit tag.
          </p>

          <progress
            id="serviceProgress"
            class="progress is-primary"
            max="2"
          ></progress>
        </section>
      </div>
    </div>

    <div class="modal" id="modal-camera">
      <div class="modal-background modal-background-close"></div>
      <div class="modal-card">
        <header class="modal-card-head">
          <p class="modal-card-title">Last Image Captured</p>
          <button class="delete" aria-label="close"></button>
        </header>
        <section class="modal-card-body">
          <p id="no-annotated-image-instructions">
            Use <code>R.camera.see()</code> in your robot code to see an
            annotated image.
          </p>
          <img id="last-annotated-image" />
        </section>
      </div>
    </div>

    <template id="tpl-log-entry">
      <div class="log-entry">
        <div class="log-entry__ts is-narrow"></div>
        <div class="log-entry__content"></div>
      </div>
    </template>

    <script src="main.js" type="module"></script>
  </body>
</html>
